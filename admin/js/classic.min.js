!function(){function e(e){e=(e=e.replace(/^\s+|\s+$/g,"")).toLowerCase();let t="\xe0\xe1\xe3\xe4\xe2\xe8\xe9\xeb\xea\xec\xed\xef\xee\xf2\xf3\xf6\xf4\xf9\xfa\xfc\xfb\xf1\xe7\xb7/_,:;";for(let o=0,n=t.length;o<n;o++)e=e.replace(RegExp(t.charAt(o),"g"),"aaaaaeeeeiiiioooouuuunc------".charAt(o));return e=e.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")}tinymce.PluginManager.add("aich_classic_plugin",function(t,o){let n=[];for(let a=0;a<aich_ajax.prompts.length;a++){n.push({text:aich_ajax.prompts[a].group_language,disabled:!0,classes:"wp-ai-co-pilot"});for(let r=0;r<aich_ajax.prompts[a].new_prompt.length;r++)n.push({text:aich_ajax.prompts[a].new_prompt[r].prompt_title,classes:"wp-ai-co-pilot",image:void 0!==aich_ajax.prompts[a].new_prompt[r].wp_ai_prompt_icon?aich_ajax.prompts[a].new_prompt[r].wp_ai_prompt_icon.url:aich_ajax.plugin_url+"admin/images/logo.png",onclick:async function(o){if(!i()){s("Please configure open AI successfully.");return}if(l())await Swal.fire({title:"Confirmation",showCancelButton:!0,text:"Interested in Simplifying Content Creation with Ready-made Templates?",showDenyButton:!0,confirmButtonText:"Yes",denyButtonText:"Stay here",cancelButtonText:"Cancel"}).then(async n=>{if(n.isConfirmed){let i=o.target.innerText;i=e(i),i=e(i);let l=t.selection.getContent({format:"text"}),d=t.getContent(),g=new DOMParser().parseFromString(d,"text/html").documentElement.textContent;localStorage.setItem("selectedText",l),localStorage.setItem("all_content",g),jQuery(".templates_wrapper").find(`.${i}`).trigger("click"),jQuery(".app_wrapper").fadeIn("slow")}else if(n.isDenied){let u=t.selection.getContent({format:"text"});if(""===u){s("Please select text from editor.");return}let f=p("below");t.selection.collapse();let w=tinymce.activeEditor.dom.select("#"+f),h="";if("dalee"===aich_ajax.prompts[a].new_prompt[r].ai_model||"pixabay"===aich_ajax.prompts[a].new_prompt[r].ai_model||"stable-diffusion-v1-6"===aich_ajax.prompts[a].new_prompt[r].ai_model||"stable-diffusion-xl-1024-v1-0"===aich_ajax.prompts[a].new_prompt[r].ai_model||"pexels"===aich_ajax.prompts[a].new_prompt[r].ai_model||"unsplash"===aich_ajax.prompts[a].new_prompt[r].ai_model)h=`<img src="${h=await c(r,u,aich_ajax.prompts[a].prompt_language,aich_ajax.prompts[a].new_prompt[r])}" alt='generated-image' />`;else try{h=await m(r,u,aich_ajax.prompts[a].prompt_language,aich_ajax.prompts[a].new_prompt[r])}catch(y){s(JSON.parse(y.message).message);return}tinymce.dom.DomQuery(w).removeAttr("class"),tinymce.dom.DomQuery(w).removeAttr("id"),tinymce.dom.DomQuery(w).html(h),t.undoManager.add()}else if(n.isDismissed)return!0});else{let n=t.selection.getContent({format:"text"});if(""===n){s("Please select text from editor.");return}let d=p("below");t.selection.collapse();let g=tinymce.activeEditor.dom.select("#"+d),u="";try{u=await m(r,n,aich_ajax.prompts[a].prompt_language,aich_ajax.prompts[a].new_prompt[r])}catch(f){s(JSON.parse(f.message).message);return}tinymce.dom.DomQuery(g).removeAttr("class"),tinymce.dom.DomQuery(g).removeAttr("id"),tinymce.dom.DomQuery(g).html(u),t.undoManager.add()}}})}function i(){return aich_ajax.api_key_is_valid}function l(){return aich_ajax.pro_activated}function p(e){tinymce.activeEditor.dom;let o=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),n=t.selection.getRng();if("below"===e){let a=t.selection.getEnd(),r=d(a,e,o),i=tinymce.dom.DomQuery(r)[0];"li"===n.endContainer.parentNode.tagName.toLowerCase()?tinymce.dom.DomQuery(a).after(i):a.textContent?(n.collapse(!1),n.insertNode(i),t.selection.collapse()):tinymce.dom.DomQuery(a).after(i)}else{let l=t.selection.getStart(),p=d(l,e,o),s=tinymce.dom.DomQuery(p)[0];"li"===n.startContainer.parentNode.tagName.toLowerCase()?tinymce.dom.DomQuery(l).before(s):l.textContent?(n.collapse(!0),n.insertNode(s),t.selection.collapse()):tinymce.dom.DomQuery(l).before(s)}return t.undoManager.add(),o}function s(e){Swal.fire({icon:"error",title:"Oops...",text:e})}t.addButton("aich_classic_plugin_text",{title:"Generate content by WP AI Co-Pilot",image:aich_ajax.plugin_url+"admin/images/logo.png",tooltip:"Generate content by WP AI Co-Pilot",class:"wp-ai-co-pilot",type:"menubutton",menu:n}),l()&&t.addButton("wp_ai_co_pilot_pro_classic_plugin",{title:"Generate content by WP AI Co-Pilot Pro",image:aich_ajax.plugin_url+"admin/images/logo.png",tooltip:"Generate content by WP AI Co-Pilot Pro",class:"wp-ai-co-pilot",onclick:function(){let e=t.selection.getContent({format:"text"}),o=t.getContent(),n=new DOMParser().parseFromString(o,"text/html").documentElement.textContent;localStorage.setItem("selectedText",e),localStorage.setItem("all_content",n),jQuery(".app_wrapper").fadeIn()}}),jQuery(document).on("click",".generate-item__bottom__icons .tooltip-box .action-btn.insert_content",function(){let e=jQuery(this).data("content");"image"===jQuery(this).data("type")&&(e=`<img src='${e}' alt='generated-content' />`);let o=p("below");t.selection.collapse();let n=tinymce.activeEditor.dom.select("#"+o);tinymce.dom.DomQuery(n).removeAttr("class"),tinymce.dom.DomQuery(n).removeAttr("id"),tinymce.dom.DomQuery(n).html(e),t.undoManager.add(),jQuery(".single_template .sidebar_inner_wrap .back_btn_trigger").trigger("click"),jQuery(".app_wrapper .close").trigger("click")});let m=async function(e,t,o,n){let a=await fetch("/wp-json/ai-content-helper/openai/v1/generated-content",{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":aich_ajax.nonce},body:JSON.stringify({requestType:e,text:[t],language:o,promptItem:n})});if(!a.ok){s("There is something wrong with the settings, please fix it.");return}let r=await a.json();return r.text},c=async function(e,t,o,n){let a=window.location.search,r=new URLSearchParams(a),i=r.get("post"),l={prompt_title:n.prompt_title,form_data:[t],prompt_content:n.prompt_content,ai_model:n.ai_model,prompt:n.prompt_content,max_tokens:n.word_count,post_id:i,media_type:n.pixabay_media_type,additional_data:{toneOfVoice:"",aiAudience:""}},p=await fetch("/wp-json/wp-ai-co-pilot-pro/generate/v1/generate-image",{method:"POST",body:JSON.stringify(l)});if(!p.ok){s(p.text());return}let m=await p.json();return JSON.parse(m.contents)[0].text},d=function(e,t,o){let n="";return n="li"===e.tagName.toLowerCase()?`<${e.tagName} id="${o}" class="aich-loading">&nbsp;</${e.tagName}>`:`<p id="${o}" class="aich-loading">&nbsp;</p>`,jQuery(".aich-loading").css("width","45px"),n}}),jQuery(".mce-english").wrapAll('<div class="test_class" />'),setTimeout(function(){(function t(){let o=[];for(let n=0;n<aich_ajax.prompts.length;n++)o.push(".mce-"+e(aich_ajax.prompts[n].group_language))})(),jQuery(".mce-wp-ai-co-pilot_searchbar").length>0&&jQuery(".mce-wp-ai-co-pilot_searchbar").append('<input type="text" id="yourInputId" placeholder="Your Placeholder Text">')},1e4)}();